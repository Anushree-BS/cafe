<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Brew Home — Cart</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{--bg:#fffdf9;--muted:#7e6c5f;--accent:#7b4f32;--card-shadow:0 12px 30px rgba(18,18,18,0.06)}
*{box-sizing:border-box}
body{margin:0;font-family:Inter;background:linear-gradient(180deg,#fff,#fbf7f3);color:#1f1f1f}
.container{max-width:1000px;margin:0 auto;padding:24px}
.header{display:flex;align-items:center;justify-content:space-between;padding:8px 0}
.logo{width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,#caa07a,#f0d4b0);display:flex;align-items:center;justify-content:center;font-weight:800;color:#fff}
.nav a{margin-left:12px;color:var(--muted)}
.card{background:#fff;border-radius:12px;padding:14px;border:1px solid rgba(27,27,27,0.03);box-shadow:var(--card-shadow)}
.item{display:flex;gap:16px;align-items:center;padding:12px 0;border-bottom:1px solid rgba(27,27,27,0.04)}
.item img{width:120px;height:80px;object-fit:cover;border-radius:8px}
.summary{margin-top:18px;padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#fff7f0);border:1px solid rgba(27,27,27,0.03)}
.btn{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
.btn-primary{background:linear-gradient(90deg,#7b4f32,#c78b5a);color:white}
.btn-outline{background:transparent;border:1px solid rgba(27,27,27,0.06)}
small{color:var(--muted)}
@media (max-width:720px){ .item{flex-direction:column;align-items:flex-start} .item img{width:100%;height:160px} }
</style>
</head>
<body>

<header class="container header">
  <div style="display:flex;gap:12px;align-items:center">
    <div class="logo">BH</div>
    <div>
      <h2 style="margin:0">Brew Home</h2>
      <div style="color:var(--muted);font-size:13px">Your Cart</div>
    </div>
  </div>
  <div class="nav">
    <a href="index.html">Home</a>
    <a href="products.html">Products</a>
    <a href="payment.html">Payment</a>
  </div>
</header>

<main class="container">
  <section class="card">
    <h3 style="margin:0 0 10px">Items in your cart</h3>
    <div id="cart-items"></div>

    <div class="summary">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div><small>Subtotal</small><div id="subtotal" style="font-weight:800">₹0</div></div>
        <div style="text-align:right">
          <div><small>Shipping</small><div id="shipping">₹0</div></div>
          <div style="margin-top:8px;font-weight:900;font-size:18px">Total <span id="total">₹0</span></div>
        </div>
      </div>

      <div style="display:flex;gap:12px;margin-top:14px">
        <button id="clear-cart" class="btn btn-outline">Clear Cart</button>
        <a id="go-payment" href="payment.html" class="btn btn-primary">Proceed to Payment</a>
      </div>
    </div>
  </section>
</main>

<script>
(function(){
  const KEY = 'brew_cart_v2';
  function read(){ try{return JSON.parse(localStorage.getItem(KEY)||'[]')}catch(e){return[]} }
  function write(v){ localStorage.setItem(KEY, JSON.stringify(v)); render(); updateHeaderCount(); }
  function updateHeaderCount(){ const el=document.querySelectorAll('#cart-count'); if(el) el.forEach(n=>n.textContent=read().length) }
  function render(){
    const items = read();
    const container = document.getElementById('cart-items');
    container.innerHTML = '';
    if(items.length===0){
      container.innerHTML = '<div style="padding:18px;color:var(--muted)">Your cart is empty. Add items from products.</div>';
      document.getElementById('subtotal').textContent = '₹0';
      document.getElementById('shipping').textContent = '₹0';
      document.getElementById('total').textContent = '₹0';
      return;
    }
    let subtotal = 0;
    items.forEach((it, idx) => {
      subtotal += (it.price * (it.qty || 1));
      const div = document.createElement('div');
      div.className = 'item';
      div.innerHTML = `
        <img src="${it.img}" alt="${it.title}">
        <div style="flex:1">
          <strong>${it.title}</strong>
          <div style="color:var(--muted);font-size:13px">${it.qty || 1} × ₹${it.price}</div>
        </div>
        <div style="text-align:right">
          <div style="font-weight:800">₹${(it.price * (it.qty || 1)).toFixed(0)}</div>
          <div style="margin-top:8px"><button data-remove="${idx}" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:transparent;cursor:pointer">Remove</button></div>
        </div>
      `;
      container.appendChild(div);
    });
    const shipping = subtotal>0 ? 50 : 0;
    document.getElementById('subtotal').textContent = `₹${subtotal.toFixed(0)}`;
    document.getElementById('shipping').textContent = `₹${shipping}`;
    document.getElementById('total').textContent = `₹${(subtotal+shipping).toFixed(0)}`;
  }

  // events
  document.addEventListener('click', function(e){
    const rem = e.target.closest('[data-remove]');
    if(rem){
      const idx = Number(rem.getAttribute('data-remove'));
      const arr = read();
      arr.splice(idx,1);
      write(arr);
    }
    if(e.target.id === 'clear-cart'){
      localStorage.removeItem(KEY);
      render();
      updateHeaderCount();
    }
  });

  // init
  render();
  updateHeaderCount();
})();
</script>

</body>
</html>
